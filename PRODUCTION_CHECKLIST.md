# 📋 本番運用チェックリスト

## 🔴 必須項目（運用開始前）

### 1. 環境設定の確認
- [ ] `.env`ファイルのバックアップ作成
- [ ] Slack Webhook URLの本番チャンネル設定
- [ ] ログディレクトリの容量確認（最低1GB推奨）

### 2. 監視対象の最終確認
- [ ] `config/targets.json`の見直し
- [ ] 優先度設定の妥当性確認
- [ ] 不要なテスト対象の削除

### 3. 通知設定の調整
- [ ] Slack通知先チャンネルの確認
- [ ] 通知頻度の制限設定（alert_config.yaml）
- [ ] 営業時間設定の検討

### 4. セキュリティ対策
- [ ] `.env`ファイルの権限設定（600）
- [ ] ログファイルの権限設定
- [ ] 不要なテストファイルの削除

## 🟡 推奨項目（運用開始後1週間以内）

### 5. 運用体制の確立
- [ ] アラート対応フローの文書化
- [ ] 担当者ローテーションの設定
- [ ] エスカレーションルールの策定

### 6. 監視とメンテナンス
- [ ] ログローテーション設定
- [ ] ディスク容量監視
- [ ] プロセス死活監視設定

### 7. バックアップ体制
- [ ] 設定ファイルの定期バックアップ
- [ ] 処理済みURLリストのバックアップ
- [ ] アラート履歴の保存

## 🟢 継続的改善項目

### 8. パフォーマンス最適化
- [ ] 誤検知率の測定と改善
- [ ] 監視間隔の最適化
- [ ] データソースの見直し

### 9. レポーティング
- [ ] 週次サマリーの作成
- [ ] 月次統計レポート
- [ ] インシデント対応記録

## 📝 運用開始コマンド

```bash
# 1. 本番用ディレクトリへ移動
cd /home/zaq/デスクトップ/exp/darkweb/darkweb-monitor-jp-alert

# 2. 環境確認
source venv/bin/activate
python scripts/manage_targets.py list

# 3. テスト実行（最終確認）
python scripts/start_monitoring_free.py --once

# 4. デーモン起動
./scripts/monitor_daemon.sh start

# 5. 動作確認
tail -f logs/monitor_daemon.log

# 6. Crontab確認（自動実行）
crontab -l
```

## ⚠️ 注意事項

1. **初期は監視頻度を高めに**
   - 最初の1週間は頻繁にログを確認
   - 誤検知パターンを記録

2. **アラート対応記録**
   - 各アラートの真偽を記録
   - 対応内容を文書化

3. **定期レビュー**
   - 週次で監視対象の見直し
   - 月次でシステム全体の評価

## 🚨 緊急時対応

### アラート過多の場合
```bash
# 一時停止
./scripts/monitor_daemon.sh stop

# 設定見直し後、再開
./scripts/monitor_daemon.sh start
```

### システム異常時
```bash
# プロセス確認
ps aux | grep darkweb

# 強制終了
kill -9 [PID]

# ログ確認
tail -100 logs/monitor_daemon.log
```

---
作成日: 2025-07-09